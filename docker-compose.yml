version: '3.8'

services:
  web:
    image: 3d_human_body_shape:1
    # build:
    #   context: .
    #   dockerfile: Dockerfile
    ports:
      - "8080:8080"
    volumes:
      - ./src:/app/src
      - ./.tmp:/app/.tmp
      - /usr/local/cuda/lib64/libcudart.so.12:/usr/local/cuda/lib64/libcudart.so.10.1
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - CUDACXX=/usr/local/cuda/bin/nvcc
      - LD_LIBRARY_PATH=/usr/local/cuda/lib64
      # FLASK_ENV: development

